        <!DOCTYPE html>
        <html>
        <head>
                <meta charset="utf-8">
        <title>PlaceController class / dart_web_toolkit_place Library / API Reference / Dart Web Toolkit</title>
        <link rel="stylesheet" type="text/css"
            href="../styles.css">
        <link href="//fonts.googleapis.com/css?family=Open+Sans:400,600,700,800" rel="stylesheet" type="text/css">
        <link rel="shortcut icon" href="../favicon.ico">
        
        <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-40672112-1']);
  _gaq.push(['_setDomainName', 'dartwebtoolkit.com']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
        <body data-library="dart_web_toolkit_place" data-type="PlaceController">
        <div class="page">
        <div class="header">
          <a href="../index.html"><div class="logo"></div></a>
          <a href="../index.html">API Reference 0.3.13</a>
         &rsaquo; <a href="../dart_web_toolkit_place.html">dart_web_toolkit_place</a> &rsaquo; <a href="../dart_web_toolkit_place/PlaceController.html">PlaceController</a>        <div id="search-box">
          <input type="search" name="q" id="q" autocomplete="off"
              class="search-input" placeholder="Search API">
        </div>
        
      </div>
      <div class="drop-down" id="drop-down"></div>
      
        <div class="nav">
        
</div>
<div class="content">
        <h2><strong>PlaceController</strong>
          class
        </h2>
        
<button id="show-inherited" class="show-inherited">Hide inherited</button>
<div class="doc">
<p>In charge of the user's location in the app.</p>
<pre class="source">
class PlaceController {

 //private static final Logger log = Logger.getLogger(PlaceController.class.getName());

 final EventBus _eventBus;

 Delegate _delegate;
 Place _where = Place.NOWHERE;

//  /**
//   * Legacy method tied to the old location for {@link EventBus}.
//   * 
//   * @deprecated use {@link #PlaceController(EventBus)}
//   */
//  @Deprecated
//  PlaceController(com.google.gwt.event.shared.EventBus _eventBus) {
//    this((EventBus) _eventBus);
//  }

//  /**
//   * Legacy method tied to the old location for {@link EventBus}.
//   * 
//   * @deprecated use {@link #PlaceController(EventBus, Delegate)}
//   */
//  @Deprecated
//  PlaceController(com.google.gwt.event.shared.EventBus _eventBus, Delegate _delegate) {
//    this((EventBus) _eventBus, _delegate);
//  }

 /**
  * Create a new PlaceController.
  * 
  * @param _eventBus the {@link EventBus}
  * @param _delegate the {@link Delegate} in charge of Window-related events
  */
 PlaceController(this._eventBus, [Delegate delegate = null]) {
   if (delegate == null) {
     _delegate = new DefaultDelegate();
   } else {
     _delegate = delegate;
   }
   //
   _delegate.addWindowClosingHandler(new ClosingHandlerAdapter((ClosingEvent event) {
     String warning = maybeGoTo(Place.NOWHERE);
     if (warning != null) {
       event.setMessage(warning);
     }
   }));
 }

 /**
  * Returns the current place.
  * 
  * @return a {@link Place} instance
  */
 Place getWhere() {
   return _where;
 }

 /**
  * Request a change to a new place. It is not a given that we'll actually get
  * there. First a {@link PlaceChangeRequestEvent} will be posted to the event
  * bus. If any receivers post a warning message to that event, it will be
  * presented to the user via {@link Delegate#confirm(String)} (which is
  * typically a call to {@link Window#confirm(String)}). If she cancels, the
  * current location will not change. Otherwise, the location changes and a
  * {@link PlaceChangeEvent} is posted announcing the new place.
  * 
  * @param newPlace a {@link Place} instance
  */
 void goTo(Place newPlace) {
//    log().fine("goTo: " + newPlace);

   if (getWhere() == newPlace) {
//      log().fine("Asked to return to the same place: " + newPlace);
     return;
   }

   String warning = maybeGoTo(newPlace);
   if (warning == null || _delegate.confirm(warning)) {
     _where = newPlace;
     _eventBus.fireEvent(new PlaceChangeEvent(newPlace));
   }
 }

//  /**
//   * Visible for testing.
//   */
//  Logger log() {
//    return log;
//  }

 String maybeGoTo(Place newPlace) {
   PlaceChangeRequestEvent willChange = new PlaceChangeRequestEvent(newPlace);
   _eventBus.fireEvent(willChange);
   String warning = willChange.getWarning();
   return warning;
 }
}
</pre>
</div>
<div>
<h3>Constructors</h3>
<div class="method"><h4 id="PlaceController">
<button class="show-code">Code</button>
new <strong>PlaceController</strong>(<a href="../dart_web_toolkit_event/EventBus.html">EventBus</a> _eventBus, [<a href="../dart_web_toolkit_place/Delegate.html">Delegate</a> delegate = null]) <a class="anchor-link" href="#PlaceController"
              title="Permalink to PlaceController.PlaceController">#</a></h4>
<div class="doc">
<p>Create a new PlaceController.</p>
<p>@param <em>eventBus the {@link EventBus}
@param </em>delegate the {@link Delegate} in charge of Window-related events</p>
<pre class="source">
PlaceController(this._eventBus, [Delegate delegate = null]) {
 if (delegate == null) {
   _delegate = new DefaultDelegate();
 } else {
   _delegate = delegate;
 }
 //
 _delegate.addWindowClosingHandler(new ClosingHandlerAdapter((ClosingEvent event) {
   String warning = maybeGoTo(Place.NOWHERE);
   if (warning != null) {
     event.setMessage(warning);
   }
 }));
}
</pre>
</div>
</div>
</div>
<div>
<h3>Methods</h3>
<div class="method"><h4 id="getWhere">
<button class="show-code">Code</button>
<a href="../dart_web_toolkit_place/Place.html">Place</a> <strong>getWhere</strong>() <a class="anchor-link" href="#getWhere"
              title="Permalink to PlaceController.getWhere">#</a></h4>
<div class="doc">
<p>Returns the current place.</p>
<p>@return a {@link Place} instance</p>
<pre class="source">
Place getWhere() {
 return _where;
}
</pre>
</div>
</div>
<div class="method"><h4 id="goTo">
<button class="show-code">Code</button>
void <strong>goTo</strong>(<a href="../dart_web_toolkit_place/Place.html">Place</a> newPlace) <a class="anchor-link" href="#goTo"
              title="Permalink to PlaceController.goTo">#</a></h4>
<div class="doc">
<p>Request a change to a new place. It is not a given that we'll actually get
there. First a {@link PlaceChangeRequestEvent} will be posted to the event
bus. If any receivers post a warning message to that event, it will be
presented to the user via {@link Delegate#confirm(String)} (which is
typically a call to {@link Window#confirm(String)}). If she cancels, the
current location will not change. Otherwise, the location changes and a
{@link PlaceChangeEvent} is posted announcing the new place.</p>
<p>@param newPlace a {@link Place} instance</p>
<pre class="source">
void goTo(Place newPlace) {
//    log().fine("goTo: " + newPlace);

 if (getWhere() == newPlace) {
//      log().fine("Asked to return to the same place: " + newPlace);
   return;
 }

 String warning = maybeGoTo(newPlace);
 if (warning == null || _delegate.confirm(warning)) {
   _where = newPlace;
   _eventBus.fireEvent(new PlaceChangeEvent(newPlace));
 }
}
</pre>
</div>
</div>
<div class="method"><h4 id="maybeGoTo">
<button class="show-code">Code</button>
String <strong>maybeGoTo</strong>(<a href="../dart_web_toolkit_place/Place.html">Place</a> newPlace) <a class="anchor-link" href="#maybeGoTo"
              title="Permalink to PlaceController.maybeGoTo">#</a></h4>
<div class="doc">
<pre class="source">
String maybeGoTo(Place newPlace) {
 PlaceChangeRequestEvent willChange = new PlaceChangeRequestEvent(newPlace);
 _eventBus.fireEvent(willChange);
 String warning = willChange.getWarning();
 return warning;
}
</pre>
</div>
</div>
</div>
        </div>
        <div class="clear"></div>
        </div>
        <div class="footer">
          <div>This page was generated at 2013-06-05 07:56:55.638</div>
        </div>
        <script async src="../client-live-nav.js"></script>
        </body></html>
        
