        <!DOCTYPE html>
        <html>
        <head>
                <meta charset="utf-8">
        <title>Timer class / dart_web_toolkit_util Library / API Reference / Dart Web Toolkit</title>
        <link rel="stylesheet" type="text/css"
            href="../styles.css">
        <link href="//fonts.googleapis.com/css?family=Open+Sans:400,600,700,800" rel="stylesheet" type="text/css">
        <link rel="shortcut icon" href="../favicon.ico">
        
        <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-40672112-1']);
  _gaq.push(['_setDomainName', 'dartwebtoolkit.com']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
        <body data-library="dart_web_toolkit_util" data-type="Timer">
        <div class="page">
        <div class="header">
          <a href="../index.html"><div class="logo"></div></a>
          <a href="../index.html">API Reference 0.3.10+4</a>
         &rsaquo; <a href="../dart_web_toolkit_util.html">dart_web_toolkit_util</a> &rsaquo; <a href="../dart_web_toolkit_util/Timer.html">Timer</a>        <div id="search-box">
          <input type="search" name="q" id="q" autocomplete="off"
              class="search-input" placeholder="Search API">
        </div>
        
      </div>
      <div class="drop-down" id="drop-down"></div>
      
        <div class="nav">
        
</div>
<div class="content">
        <h2><strong>Timer</strong>
          class
        </h2>
        
<button id="show-inherited" class="show-inherited">Hide inherited</button>
<div class="doc">
<p>A simplified, browser-safe timer class. This class serves the same purpose as
java.util.Timer, but is simplified because of the single-threaded
environment.</p><p>
To schedule a timer, simply create a subclass of it (overriding {@link #run})
and call {@link #schedule} or {@link #scheduleRepeating}.
</p><p>
NOTE: If you are using a timer to schedule a UI animation, use
{@link com.google.gwt.animation.client.AnimationScheduler} instead. The
browser can optimize your animation for maximum performance.
</p><p>
<h3>Example</h3>
{@example com.google.gwt.examples.TimerExample}
</p>
<pre class="source">
class Timer {
 static List&lt;Timer&gt; _timers = new List&lt;Timer&gt;();
 static bool _initialised = false;

 static void clearInterval(dart_async.Timer timer) {
   timer.cancel();
 }

 static void clearTimeout(dart_async.Timer timer) {
   timer.cancel();
 }

 static dart_async.Timer createInterval(Timer timer, int period) {
   return new dart_async.Timer.periodic(new Duration(milliseconds:period), (dart_async.Timer t){
     timer.fire();
   });
 }

 static dart_async.Timer createTimeout(Timer timer, int delay) {
   return new dart_async.Timer(new Duration(milliseconds:delay), (){
     timer.fire();
   });
 }

 static void _hookWindowClosing() {
   // Catch the window closing event.
   dart_html.window.onUnload.listen((dart_html.Event event) {
       while (_timers.length &gt; 0) {
         _timers[0].cancel();
       }
   });
 }

 bool isRepeating = false;

 dart_async.Timer _timer;

 Function _callback;

 factory Timer.get(Function _callback) {
   if (!_initialised) {
     _initialised = true;
     _hookWindowClosing();
   }
   return new Timer._internal(_callback);
 }

 Timer._internal(this._callback);

 /**
  * Cancels this timer.
  */
 void cancel() {
   if (_timer != null) {
     if (isRepeating) {
       clearInterval(_timer); //timerId);
     } else {
       clearTimeout(_timer); //timerId);
     }
     int indx = _timers.indexOf(this);
     if (indx != -1) {
       _timers.removeAt(indx);
     }
   }
 }

 /**
  * This method will be called when a timer fires. Override it to implement the
  * timer's logic.
  */
 void run() {
   _callback();
 }

 /**
  * Schedules a timer to elapse in the future.
  *
  * @param delayMillis how long to wait before the timer elapses, in
  *          milliseconds
  */
 void schedule(int delayMillis) {
   if (delayMillis &lt; 0) {
     throw new Exception("must be non-negative");
   }
   cancel();
   isRepeating = false;
   _timer = createTimeout(this, delayMillis);
   _timers.add(this);
 }

 /**
  * Schedules a timer that elapses repeatedly.
  *
  * @param periodMillis how long to wait before the timer elapses, in
  *          milliseconds, between each repetition
  */
 void scheduleRepeating(int periodMillis) {
   if (periodMillis &lt;= 0) {
     throw new Exception("must be positive");
   }
   cancel();
   isRepeating = true;
   _timer = createInterval(this, periodMillis);
   _timers.add(this);
 }

 /*
  * Called by code when this timer fires.
  */
 void fire() {
   // If this is a one-shot timer, remove it from the timer list. This will
   // allow it to be garbage collected.
   if (!isRepeating) {
     int indx = _timers.indexOf(this);
     if (indx != -1) {
       _timers.removeAt(indx);
     }
   }

   // Run the timer's code.
   run();
 }
}
</pre>
</div>
<div>
<h3>Static Methods</h3>
<div class="method"><h4 id="clearInterval">
<button class="show-code">Code</button>
void <strong>clearInterval</strong>(Timer timer) <a class="anchor-link" href="#clearInterval"
              title="Permalink to Timer.clearInterval">#</a></h4>
<div class="doc">
<pre class="source">
static void clearInterval(dart_async.Timer timer) {
 timer.cancel();
}
</pre>
</div>
</div>
<div class="method"><h4 id="clearTimeout">
<button class="show-code">Code</button>
void <strong>clearTimeout</strong>(Timer timer) <a class="anchor-link" href="#clearTimeout"
              title="Permalink to Timer.clearTimeout">#</a></h4>
<div class="doc">
<pre class="source">
static void clearTimeout(dart_async.Timer timer) {
 timer.cancel();
}
</pre>
</div>
</div>
<div class="method"><h4 id="createInterval">
<button class="show-code">Code</button>
Timer <strong>createInterval</strong>(<a href="../dart_web_toolkit_util/Timer.html">Timer</a> timer, int period) <a class="anchor-link" href="#createInterval"
              title="Permalink to Timer.createInterval">#</a></h4>
<div class="doc">
<pre class="source">
static dart_async.Timer createInterval(Timer timer, int period) {
 return new dart_async.Timer.periodic(new Duration(milliseconds:period), (dart_async.Timer t){
   timer.fire();
 });
}
</pre>
</div>
</div>
<div class="method"><h4 id="createTimeout">
<button class="show-code">Code</button>
Timer <strong>createTimeout</strong>(<a href="../dart_web_toolkit_util/Timer.html">Timer</a> timer, int delay) <a class="anchor-link" href="#createTimeout"
              title="Permalink to Timer.createTimeout">#</a></h4>
<div class="doc">
<pre class="source">
static dart_async.Timer createTimeout(Timer timer, int delay) {
 return new dart_async.Timer(new Duration(milliseconds:delay), (){
   timer.fire();
 });
}
</pre>
</div>
</div>
</div>
<div>
<h3>Constructors</h3>
<div class="method"><h4 id="Timer.get">
<button class="show-code">Code</button>
factory <strong>Timer.get</strong>(Function _callback) <a class="anchor-link" href="#Timer.get"
              title="Permalink to Timer.Timer.get">#</a></h4>
<div class="doc">
<pre class="source">
factory Timer.get(Function _callback) {
 if (!_initialised) {
   _initialised = true;
   _hookWindowClosing();
 }
 return new Timer._internal(_callback);
}
</pre>
</div>
</div>
</div>
<div>
<h3>Properties</h3>
<div class="field"><h4 id="isRepeating">
<button class="show-code">Code</button>
bool         <strong>isRepeating</strong> <a class="anchor-link"
            href="#isRepeating"
            title="Permalink to Timer.isRepeating">#</a>
        </h4>
        <div class="doc">
<pre class="source">
bool isRepeating = false
</pre>
</div>
</div>
</div>
<div>
<h3>Methods</h3>
<div class="method"><h4 id="cancel">
<button class="show-code">Code</button>
void <strong>cancel</strong>() <a class="anchor-link" href="#cancel"
              title="Permalink to Timer.cancel">#</a></h4>
<div class="doc">
<p>Cancels this timer.</p>
<pre class="source">
void cancel() {
 if (_timer != null) {
   if (isRepeating) {
     clearInterval(_timer); //timerId);
   } else {
     clearTimeout(_timer); //timerId);
   }
   int indx = _timers.indexOf(this);
   if (indx != -1) {
     _timers.removeAt(indx);
   }
 }
}
</pre>
</div>
</div>
<div class="method"><h4 id="fire">
<button class="show-code">Code</button>
void <strong>fire</strong>() <a class="anchor-link" href="#fire"
              title="Permalink to Timer.fire">#</a></h4>
<div class="doc">
<pre class="source">
void fire() {
 // If this is a one-shot timer, remove it from the timer list. This will
 // allow it to be garbage collected.
 if (!isRepeating) {
   int indx = _timers.indexOf(this);
   if (indx != -1) {
     _timers.removeAt(indx);
   }
 }

 // Run the timer's code.
 run();
}
</pre>
</div>
</div>
<div class="method"><h4 id="run">
<button class="show-code">Code</button>
void <strong>run</strong>() <a class="anchor-link" href="#run"
              title="Permalink to Timer.run">#</a></h4>
<div class="doc">
<p>This method will be called when a timer fires. Override it to implement the
timer's logic.</p>
<pre class="source">
void run() {
 _callback();
}
</pre>
</div>
</div>
<div class="method"><h4 id="schedule">
<button class="show-code">Code</button>
void <strong>schedule</strong>(int delayMillis) <a class="anchor-link" href="#schedule"
              title="Permalink to Timer.schedule">#</a></h4>
<div class="doc">
<p>Schedules a timer to elapse in the future.</p>
<p>@param delayMillis how long to wait before the timer elapses, in</p>
<pre><code>     milliseconds
</code></pre>
<pre class="source">
void schedule(int delayMillis) {
 if (delayMillis &lt; 0) {
   throw new Exception("must be non-negative");
 }
 cancel();
 isRepeating = false;
 _timer = createTimeout(this, delayMillis);
 _timers.add(this);
}
</pre>
</div>
</div>
<div class="method"><h4 id="scheduleRepeating">
<button class="show-code">Code</button>
void <strong>scheduleRepeating</strong>(int periodMillis) <a class="anchor-link" href="#scheduleRepeating"
              title="Permalink to Timer.scheduleRepeating">#</a></h4>
<div class="doc">
<p>Schedules a timer that elapses repeatedly.</p>
<p>@param periodMillis how long to wait before the timer elapses, in</p>
<pre><code>     milliseconds, between each repetition
</code></pre>
<pre class="source">
void scheduleRepeating(int periodMillis) {
 if (periodMillis &lt;= 0) {
   throw new Exception("must be positive");
 }
 cancel();
 isRepeating = true;
 _timer = createInterval(this, periodMillis);
 _timers.add(this);
}
</pre>
</div>
</div>
</div>
        </div>
        <div class="clear"></div>
        </div>
        <div class="footer">
          <div>This page was generated at 2013-05-18 19:53:56.457</div>
        </div>
        <script async src="../client-live-nav.js"></script>
        </body></html>
        
