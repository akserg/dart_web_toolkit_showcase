        <!DOCTYPE html>
        <html>
        <head>
                <meta charset="utf-8">
        <title>History class / dart_web_toolkit_ui Library / API Reference / Dart Web Toolkit</title>
        <link rel="stylesheet" type="text/css"
            href="../styles.css">
        <link href="//fonts.googleapis.com/css?family=Open+Sans:400,600,700,800" rel="stylesheet" type="text/css">
        <link rel="shortcut icon" href="../favicon.ico">
        
        <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-40672112-1']);
  _gaq.push(['_setDomainName', 'dartwebtoolkit.com']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
        <body data-library="dart_web_toolkit_ui" data-type="History">
        <div class="page">
        <div class="header">
          <a href="../index.html"><div class="logo"></div></a>
          <a href="../index.html">API Reference 0.3.13</a>
         &rsaquo; <a href="../dart_web_toolkit_ui.html">dart_web_toolkit_ui</a> &rsaquo; <a href="../dart_web_toolkit_ui/History.html">History</a>        <div id="search-box">
          <input type="search" name="q" id="q" autocomplete="off"
              class="search-input" placeholder="Search API">
        </div>
        
      </div>
      <div class="drop-down" id="drop-down"></div>
      
        <div class="nav">
        
</div>
<div class="content">
        <h2><strong>History</strong>
          class
        </h2>
        
<button id="show-inherited" class="show-inherited">Hide inherited</button>
<div class="doc">
<p>This class allows you to interact with the browser's history stack. Each
"item" on the stack is represented by a single string, referred to as a
"token". You can create new history items (which have a token associated with
them when they are created), and you can programmatically force the current
history to move back or forward.</p><p>
In order to receive notification of user-directed changes to the current
history item, implement the {@link ValueChangeHandler} interface and attach
it via {@link #addValueChangeHandler(ValueChangeHandler)}.
</p><p>
<h3>Example</h3>
{@example com.google.gwt.examples.HistoryExample}
</p><p>
<h3>URL Encoding</h3>
Any valid characters may be used in the history token and will survive
round-trips through {@link #newItem(String)} to {@link #getToken()}/
{@link ValueChangeHandler#onValueChange(com.google.gwt.event.logical.shared.ValueChangeEvent)}
, but most will be encoded in the user-visible URL. The following US-ASCII
characters are not encoded on any currently supported browser (but may be in
the future due to future browser changes):
<ul>
<li>a-z
<li>A-Z
<li>0-9
<li>;,/?:@&=+$-_.!~*()
</ul>
</p>
<pre class="source">
class History {
 static HistoryImpl _impl;

 static bool _initialized = false;
 
 static void init() {
   if (!_initialized) {
     _initialized = true;
     //
     _impl = new HistoryImpl();
     if (!_impl.init()) {
       // Set impl to null as a flag to no-op future calls
       _impl = null;
       
       // Tell the user
       print('''Unable to initialise the history subsystem; did you
include the history frame in you host page? Try  
&lt;iframe src=\"javascript:''\" id='__dwt_historyFrame' 
style='position:absolute;width:0'height:0;border:0'&gt;
&lt;/iframe&gt;
''');
     }
   }
 }
 
 /**
  * Adds a {@link com.google.gwt.event.logical.shared.ValueChangeEvent} handler
  * to be informed of changes to the browser's history stack.
  *
  * @param handler the handler
  * @return the registration used to remove this value change handler
  */
 static HandlerRegistration addValueChangeHandler(ValueChangeHandler&lt;String&gt; handler) {
   init();
   return _impl != null ? _impl.addValueChangeHandler(handler) : null;
 }

 /**
  * Programmatic equivalent to the user pressing the browser's 'back' button.
  *
  * Note that this does not work correctly on Safari 2.
  */
 static void back() {
   init();
   dart_html.window.history.back();
 }

 /**
  * Programmatic equivalent to the user pressing the browser's 'forward'
  * button.
  */
 static void forward() {
   init();
   dart_html.window.history.forward();
 }

 /**
  * Encode a history token for use as part of a URI.
  *
  * @param historyToken the token to encode
  * @return the encoded token, suitable for use as part of a URI
  */
 static String encodeHistoryToken(String historyToken) {
   init();
   return _impl != null ? _impl.encodeFragment(historyToken) : historyToken;
 }

 /**
  * Fire
  * {@link ValueChangeHandler#onValueChange(com.google.gwt.event.logical.shared.ValueChangeEvent)}
  * events with the current history state. This is most often called at the end 
  * of an application's
  * {@link com.google.gwt.core.client.EntryPoint#onModuleLoad()} to inform
  * history handlers of the initial application state.
  */
 static void fireCurrentHistoryState() {
   init();
   if (_impl != null) {
     String token = getToken();
     _impl.fireHistoryChangedImpl(token);
   }
 }

 /**
  * Gets the current history token. The handler will not receive a
  * {@link ValueChangeHandler#onValueChange(com.google.gwt.event.logical.shared.ValueChangeEvent)}
  * event for the initial token; requiring that an application request the
  * token explicitly on startup gives it an opportunity to run different
  * initialization code in the presence or absence of an initial token.
  *
  * @return the initial token, or the empty string if none is present.
  */
 static String getToken() {
   init();
   return _impl != null ? HistoryImpl.getToken() : "";
 }

 /**
  * Adds a new browser history entry. Calling this method will cause
  * {@link ValueChangeHandler#onValueChange(com.google.gwt.event.logical.shared.ValueChangeEvent)}
  * to be called as well if and only if issueEvent is true.
  *
  * @param historyToken the token to associate with the new history item
  * @param issueEvent true if a
  *          {@link ValueChangeHandler#onValueChange(com.google.gwt.event.logical.shared.ValueChangeEvent)}
  *          event should be issued
  */
 static void newItem(String historyToken, [bool issueEvent = true]) {
   init();
   if (_impl != null) {
     _impl.newItem(historyToken, issueEvent);
   }
 }
}
</pre>
</div>
<div>
<h3>Static Methods</h3>
<div class="method"><h4 id="init">
<button class="show-code">Code</button>
void <strong>init</strong>() <a class="anchor-link" href="#init"
              title="Permalink to History.init">#</a></h4>
<div class="doc">
<pre class="source">
static void init() {
 if (!_initialized) {
   _initialized = true;
   //
   _impl = new HistoryImpl();
   if (!_impl.init()) {
     // Set impl to null as a flag to no-op future calls
     _impl = null;
     
     // Tell the user
     print('''Unable to initialise the history subsystem; did you
include the history frame in you host page? Try  
&lt;iframe src=\"javascript:''\" id='__dwt_historyFrame' 
style='position:absolute;width:0'height:0;border:0'&gt;
&lt;/iframe&gt;
''');
   }
 }
}
</pre>
</div>
</div>
<div class="method"><h4 id="addValueChangeHandler">
<button class="show-code">Code</button>
<a href="../dart_web_toolkit_event/HandlerRegistration.html">HandlerRegistration</a> <strong>addValueChangeHandler</strong>(<a href="../dart_web_toolkit_event/ValueChangeHandler.html">ValueChangeHandler</a>&lt;String&gt; handler) <a class="anchor-link" href="#addValueChangeHandler"
              title="Permalink to History.addValueChangeHandler">#</a></h4>
<div class="doc">
<p>Adds a {@link com.google.gwt.event.logical.shared.ValueChangeEvent} handler
to be informed of changes to the browser's history stack.</p>
<p>@param handler the handler
@return the registration used to remove this value change handler</p>
<pre class="source">
static HandlerRegistration addValueChangeHandler(ValueChangeHandler&lt;String&gt; handler) {
 init();
 return _impl != null ? _impl.addValueChangeHandler(handler) : null;
}
</pre>
</div>
</div>
<div class="method"><h4 id="back">
<button class="show-code">Code</button>
void <strong>back</strong>() <a class="anchor-link" href="#back"
              title="Permalink to History.back">#</a></h4>
<div class="doc">
<p>Programmatic equivalent to the user pressing the browser's 'back' button.</p>
<p>Note that this does not work correctly on Safari 2.</p>
<pre class="source">
static void back() {
 init();
 dart_html.window.history.back();
}
</pre>
</div>
</div>
<div class="method"><h4 id="forward">
<button class="show-code">Code</button>
void <strong>forward</strong>() <a class="anchor-link" href="#forward"
              title="Permalink to History.forward">#</a></h4>
<div class="doc">
<p>Programmatic equivalent to the user pressing the browser's 'forward'
button.</p>
<pre class="source">
static void forward() {
 init();
 dart_html.window.history.forward();
}
</pre>
</div>
</div>
<div class="method"><h4 id="encodeHistoryToken">
<button class="show-code">Code</button>
String <strong>encodeHistoryToken</strong>(String historyToken) <a class="anchor-link" href="#encodeHistoryToken"
              title="Permalink to History.encodeHistoryToken">#</a></h4>
<div class="doc">
<p>Encode a history token for use as part of a URI.</p>
<p>@param historyToken the token to encode
@return the encoded token, suitable for use as part of a URI</p>
<pre class="source">
static String encodeHistoryToken(String historyToken) {
 init();
 return _impl != null ? _impl.encodeFragment(historyToken) : historyToken;
}
</pre>
</div>
</div>
<div class="method"><h4 id="fireCurrentHistoryState">
<button class="show-code">Code</button>
void <strong>fireCurrentHistoryState</strong>() <a class="anchor-link" href="#fireCurrentHistoryState"
              title="Permalink to History.fireCurrentHistoryState">#</a></h4>
<div class="doc">
<p>Fire
{@link ValueChangeHandler#onValueChange(com.google.gwt.event.logical.shared.ValueChangeEvent)}
events with the current history state. This is most often called at the end 
of an application's
{@link com.google.gwt.core.client.EntryPoint#onModuleLoad()} to inform
history handlers of the initial application state.</p>
<pre class="source">
static void fireCurrentHistoryState() {
 init();
 if (_impl != null) {
   String token = getToken();
   _impl.fireHistoryChangedImpl(token);
 }
}
</pre>
</div>
</div>
<div class="method"><h4 id="getToken">
<button class="show-code">Code</button>
String <strong>getToken</strong>() <a class="anchor-link" href="#getToken"
              title="Permalink to History.getToken">#</a></h4>
<div class="doc">
<p>Gets the current history token. The handler will not receive a
{@link ValueChangeHandler#onValueChange(com.google.gwt.event.logical.shared.ValueChangeEvent)}
event for the initial token; requiring that an application request the
token explicitly on startup gives it an opportunity to run different
initialization code in the presence or absence of an initial token.</p>
<p>@return the initial token, or the empty string if none is present.</p>
<pre class="source">
static String getToken() {
 init();
 return _impl != null ? HistoryImpl.getToken() : "";
}
</pre>
</div>
</div>
<div class="method"><h4 id="newItem">
<button class="show-code">Code</button>
void <strong>newItem</strong>(String historyToken, [bool issueEvent = true]) <a class="anchor-link" href="#newItem"
              title="Permalink to History.newItem">#</a></h4>
<div class="doc">
<p>Adds a new browser history entry. Calling this method will cause
{@link ValueChangeHandler#onValueChange(com.google.gwt.event.logical.shared.ValueChangeEvent)}
to be called as well if and only if issueEvent is true.</p>
<p>@param historyToken the token to associate with the new history item
@param issueEvent true if a</p>
<pre><code>     {@link ValueChangeHandler#onValueChange(com.google.gwt.event.logical.shared.ValueChangeEvent)}
     event should be issued
</code></pre>
<pre class="source">
static void newItem(String historyToken, [bool issueEvent = true]) {
 init();
 if (_impl != null) {
   _impl.newItem(historyToken, issueEvent);
 }
}
</pre>
</div>
</div>
</div>
        </div>
        <div class="clear"></div>
        </div>
        <div class="footer">
          <div>This page was generated at 2013-06-05 07:57:00.914</div>
        </div>
        <script async src="../client-live-nav.js"></script>
        </body></html>
        
