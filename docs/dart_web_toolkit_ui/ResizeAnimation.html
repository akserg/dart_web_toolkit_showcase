        <!DOCTYPE html>
        <html>
        <head>
                <meta charset="utf-8">
        <title>ResizeAnimation class / dart_web_toolkit_ui Library / API Reference / Dart Web Toolkit</title>
        <link rel="stylesheet" type="text/css"
            href="../styles.css">
        <link href="//fonts.googleapis.com/css?family=Open+Sans:400,600,700,800" rel="stylesheet" type="text/css">
        <link rel="shortcut icon" href="../favicon.ico">
        
        <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-40672112-1']);
  _gaq.push(['_setDomainName', 'dartwebtoolkit.com']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
        <body data-library="dart_web_toolkit_ui" data-type="ResizeAnimation">
        <div class="page">
        <div class="header">
          <a href="../index.html"><div class="logo"></div></a>
          <a href="../index.html">API Reference 0.3.16</a>
         &rsaquo; <a href="../dart_web_toolkit_ui.html">dart_web_toolkit_ui</a> &rsaquo; <a href="../dart_web_toolkit_ui/ResizeAnimation.html">ResizeAnimation</a>        <div id="search-box">
          <input type="search" name="q" id="q" autocomplete="off"
              class="search-input" placeholder="Search API">
        </div>
        
      </div>
      <div class="drop-down" id="drop-down"></div>
      
        <div class="nav">
        
</div>
<div class="content">
        <h2><strong>ResizeAnimation</strong>
          class
        </h2>
        
<button id="show-inherited" class="show-inherited">Hide inherited</button>
<div class="doc">
<p>An {@link Animation} used to enlarge the popup into view.</p>
<pre class="source">
class ResizeAnimation extends Animation {
 /**
  * The {@link PopupPanel} being affected.
  */
 PopupPanel curPanel = null;

 /**
  * Indicates whether or not the {@link PopupPanel} is in the process of
  * unloading. If the popup is unloading, then the animation just does
  * cleanup.
  */
 bool isUnloading = false;

 /**
  * The offset height and width of the current {@link PopupPanel}.
  */
 int offsetHeight, offsetWidth = -1;

 /**
  * A bool indicating whether we are showing or hiding the popup.
  */
 bool showing = false;

 /**
  * The timer used to delay the show animation.
  */
 Timer showTimer;

 /**
  * A bool indicating whether the glass element is currently attached.
  */
 bool glassShowing = false;

 //HandlerRegistration resizeRegistration;

 /**
  * Create a new {@link ResizeAnimation}.
 *
  * @param panel the panel to affect
  */
 ResizeAnimation(PopupPanel panel) {
   this.curPanel = panel;
 }

 /**
  * Open or close the content. This method always called immediately after
  * the PopupPanel showing state has changed, so we base the animation on the
  * current state.
 *
  * @param showing true if the popup is showing, false if not
  */
 void setState(bool showing, bool isUnloading) {
   // Immediately complete previous open/close animation
   this.isUnloading = isUnloading;
   cancel();

   // If there is a pending timer to start a show animation, then just cancel
   // the timer and complete the show operation.
   if (showTimer != null) {
     showTimer.cancel();
     showTimer = null;
     onComplete();
   }

   // Update the logical state.
   curPanel.showing = showing;
   curPanel.updateHandlers();

   // Determine if we need to animate
   bool animate = !isUnloading &amp;&amp; curPanel._isAnimationEnabled;
   if (curPanel.animType != AnimationType.CENTER &amp;&amp; !showing) {
     animate = false;
   }

   // Open the new item
   this.showing = showing;
   if (animate) {
     // impl.onShow takes some time to complete, so we do it before starting
     // the animation. If we move this to onStart, the animation will look
     // choppy or not run at all.
     if (showing) {
       maybeShowGlass();

       // Set the position attribute, and then attach to the Dom. Otherwise,
       // the PopupPanel will appear to 'jump' from its static/relative
       // position to its absolute position (issue #1231).
       Dom.setStyleAttribute(curPanel.getElement(), "position", "absolute");
       if (curPanel.topPosition != -1) {
         curPanel.setPopupPosition(curPanel.leftPosition,
             curPanel.topPosition);
       }
       PopupPanel.impl.setClip(curPanel.getElement(), getRectString(0, 0, 0, 0));
       RootPanel.get().add(curPanel);
       PopupPanel.impl.onShow(curPanel.getElement());

       // Wait for the popup panel and iframe to be attached before running
       // the animation. We use a Timer instead of a DeferredCommand so we
       // can cancel it if the popup is hidden synchronously.
       showTimer = new Timer.get(() {
         showTimer = null;
         run(PopupPanel.ANIMATION_DURATION);
       });
       showTimer.schedule(1);
     } else {
       run(PopupPanel.ANIMATION_DURATION);
     }
   } else {
     onInstantaneousRun();
   }
 }


 void onComplete() {
   if (!showing) {
     maybeShowGlass();
     if (!isUnloading) {
       RootPanel.get().remove(curPanel);
     }
     PopupPanel.impl.onHide(curPanel.getElement());
   }
   PopupPanel.impl.setClip(curPanel.getElement(), "rect(auto, auto, auto, auto)");
   Dom.setStyleAttribute(curPanel.getElement(), "overflow", "visible");
 }


 void onStart() {
   offsetHeight = curPanel.getOffsetHeight();
   offsetWidth = curPanel.getOffsetWidth();
   Dom.setStyleAttribute(curPanel.getElement(), "overflow", "hidden");
   super.onStart();
 }


 void onUpdate(double progress) {
   if (!showing) {
     progress = 1.0 - progress;
   }

   // Determine the clipping size
   int top = 0;
   int left = 0;
   int right = 0;
   int bottom = 0;
   int height = (progress * offsetHeight).toInt();
   int width = (progress * offsetWidth).toInt();
   switch (curPanel.animType) {
     case AnimationType.ROLL_DOWN:
       right = offsetWidth;
       bottom = height;
       break;
     case AnimationType.CENTER:
       top = (offsetHeight - height) &gt;&gt; 1;
       left = (offsetWidth - width) &gt;&gt; 1;
       right = left + width;
       bottom = top + height;
       break;
     case AnimationType.ONE_WAY_CORNER:
       if (LocaleInfo.getCurrentLocale().isRTL()) {
         left = offsetWidth - width;
       }
       right = left + width;
       bottom = top + height;
       break;
   }
   // Set the rect clipping
   PopupPanel.impl.setClip(curPanel.getElement(), getRectString(top, right, bottom, left));
 }

 /**
  * Returns a rect string.
  */
 String getRectString(int top, int right, int bottom, int left) {
   return "rect(${top}px, ${right}px, ${bottom}px, ${left}px)";
 }

 /**
  * Show or hide the glass.
  */
 void maybeShowGlass() {
   if (showing) {
     if (curPanel._isGlassEnabled) {
       dart_html.document.body.append(curPanel.glass);
       PopupPanel.impl.onShow(curPanel.glass);

//        resizeRegistration = dart_html.document.window.addResizeHandler(curPanel.glassResizer);
       curPanel.glassResizer.onResize(null);

       glassShowing = true;
     }
   } else if (glassShowing) {
     //dart_html.document.body.removeChild(curPanel.glass);
     curPanel.glass.remove();
     PopupPanel.impl.onHide(curPanel.glass);

//      resizeRegistration.removeHandler();
//      resizeRegistration = null;

     glassShowing = false;
   }
 }

 void onInstantaneousRun() {
   maybeShowGlass();
   if (showing) {
     // Set the position attribute, and then attach to the Dom. Otherwise,
     // the PopupPanel will appear to 'jump' from its static/relative
     // position to its absolute position (issue #1231).
     Dom.setStyleAttribute(curPanel.getElement(), "position", "absolute");
     if (curPanel.topPosition != -1) {
       curPanel.setPopupPosition(curPanel.leftPosition, curPanel.topPosition);
     }
     RootPanel.get().add(curPanel);
     PopupPanel.impl.onShow(curPanel.getElement());
   } else {
     if (!isUnloading) {
       RootPanel.get().remove(curPanel);
     }
     PopupPanel.impl.onHide(curPanel.getElement());
   }
   Dom.setStyleAttribute(curPanel.getElement(), "overflow", "visible");
 }
}
</pre>
</div>
<h3>Extends</h3>
<p>
<span class="type-box"><span class="icon-class"></span><a href="../dart_web_toolkit_animation/Animation.html">Animation</a></span>&nbsp;&gt;&nbsp;<span class="type-box"><span class="icon-class"></span><strong>ResizeAnimation</strong></span></p>
<div>
<h3>Constructors</h3>
<div class="method"><h4 id="ResizeAnimation">
<button class="show-code">Code</button>
new <strong>ResizeAnimation</strong>(<a href="../dart_web_toolkit_ui/PopupPanel.html">PopupPanel</a> panel) <a class="anchor-link" href="#ResizeAnimation"
              title="Permalink to ResizeAnimation.ResizeAnimation">#</a></h4>
<div class="doc">
<p>Create a new {@link ResizeAnimation}.</p>
<p>@param panel the panel to affect</p>
<pre class="source">
ResizeAnimation(PopupPanel panel) {
 this.curPanel = panel;
}
</pre>
</div>
</div>
</div>
<div>
<h3>Properties</h3>
<div class="field inherited"><h4 id="callback">
<button class="show-code">Code</button>
<a href="../dart_web_toolkit_animation/AnimationCallback.html">AnimationCallback</a>         <strong>callback</strong> <a class="anchor-link"
            href="#callback"
            title="Permalink to ResizeAnimation.callback">#</a>
        </h4>
        <div class="inherited-from">inherited from <a href="../dart_web_toolkit_animation/Animation.html">Animation</a> </div><div class="doc">
<pre class="source">
AnimationCallback callback
</pre>
</div>
</div>
<div class="field"><h4 id="curPanel">
<button class="show-code">Code</button>
<a href="../dart_web_toolkit_ui/PopupPanel.html">PopupPanel</a>         <strong>curPanel</strong> <a class="anchor-link"
            href="#curPanel"
            title="Permalink to ResizeAnimation.curPanel">#</a>
        </h4>
        <div class="doc">
<p>The {@link PopupPanel} being affected.</p>
<pre class="source">
PopupPanel curPanel = null
</pre>
</div>
</div>
<div class="field inherited"><h4 id="duration">
<button class="show-code">Code</button>
int         <strong>duration</strong> <a class="anchor-link"
            href="#duration"
            title="Permalink to ResizeAnimation.duration">#</a>
        </h4>
        <div class="inherited-from">inherited from <a href="../dart_web_toolkit_animation/Animation.html">Animation</a> </div><div class="doc">
<p>The duration of the {@link Animation} in milliseconds.</p>
<pre class="source">
int duration = -1
</pre>
</div>
</div>
<div class="field inherited"><h4 id="element">
<button class="show-code">Code</button>
Element         <strong>element</strong> <a class="anchor-link"
            href="#element"
            title="Permalink to ResizeAnimation.element">#</a>
        </h4>
        <div class="inherited-from">inherited from <a href="../dart_web_toolkit_animation/Animation.html">Animation</a> </div><div class="doc">
<p>The element being animated.</p>
<pre class="source">
dart_html.Element element
</pre>
</div>
</div>
<div class="field"><h4 id="glassShowing">
<button class="show-code">Code</button>
bool         <strong>glassShowing</strong> <a class="anchor-link"
            href="#glassShowing"
            title="Permalink to ResizeAnimation.glassShowing">#</a>
        </h4>
        <div class="doc">
<p>A bool indicating whether the glass element is currently attached.</p>
<pre class="source">
bool glassShowing = false
</pre>
</div>
</div>
<div class="field inherited"><h4 id="isStarted">
<button class="show-code">Code</button>
bool         <strong>isStarted</strong> <a class="anchor-link"
            href="#isStarted"
            title="Permalink to ResizeAnimation.isStarted">#</a>
        </h4>
        <div class="inherited-from">inherited from <a href="../dart_web_toolkit_animation/Animation.html">Animation</a> </div><div class="doc">
<p>Has the {@link Animation} actually started.</p>
<pre class="source">
bool isStarted = false
</pre>
</div>
</div>
<div class="field"><h4 id="isUnloading">
<button class="show-code">Code</button>
bool         <strong>isUnloading</strong> <a class="anchor-link"
            href="#isUnloading"
            title="Permalink to ResizeAnimation.isUnloading">#</a>
        </h4>
        <div class="doc">
<p>Indicates whether or not the {@link PopupPanel} is in the process of
unloading. If the popup is unloading, then the animation just does
cleanup.</p>
<pre class="source">
bool isUnloading = false
</pre>
</div>
</div>
<div class="field"><h4 id="offsetHeight">
<button class="show-code">Code</button>
int         <strong>offsetHeight</strong> <a class="anchor-link"
            href="#offsetHeight"
            title="Permalink to ResizeAnimation.offsetHeight">#</a>
        </h4>
        <div class="doc">
<p>The offset height and width of the current {@link PopupPanel}.</p>
<pre class="source">
int offsetHeight
</pre>
</div>
</div>
<div class="field"><h4 id="offsetWidth">
<button class="show-code">Code</button>
int         <strong>offsetWidth</strong> <a class="anchor-link"
            href="#offsetWidth"
            title="Permalink to ResizeAnimation.offsetWidth">#</a>
        </h4>
        <div class="doc">
<p>The offset height and width of the current {@link PopupPanel}.</p>
<pre class="source">
int offsetHeight, offsetWidth = -1
</pre>
</div>
</div>
<div class="field inherited"><h4 id="requestHandle">
<button class="show-code">Code</button>
<a href="../dart_web_toolkit_animation/AnimationHandle.html">AnimationHandle</a>         <strong>requestHandle</strong> <a class="anchor-link"
            href="#requestHandle"
            title="Permalink to ResizeAnimation.requestHandle">#</a>
        </h4>
        <div class="inherited-from">inherited from <a href="../dart_web_toolkit_animation/Animation.html">Animation</a> </div><div class="doc">
<p>The ID of the pending animation request.</p>
<pre class="source">
AnimationHandle requestHandle
</pre>
</div>
</div>
<div class="field inherited"><h4 id="runId">
<button class="show-code">Code</button>
int         <strong>runId</strong> <a class="anchor-link"
            href="#runId"
            title="Permalink to ResizeAnimation.runId">#</a>
        </h4>
        <div class="inherited-from">inherited from <a href="../dart_web_toolkit_animation/Animation.html">Animation</a> </div><div class="doc">
<p>The unique ID of the current run. Used to handle cases where an animation
is restarted within an execution block.</p>
<pre class="source">
int runId = -1
</pre>
</div>
</div>
<div class="field inherited"><h4 id="running">
<button class="show-code">Code</button>
bool         <strong>running</strong> <a class="anchor-link"
            href="#running"
            title="Permalink to ResizeAnimation.running">#</a>
        </h4>
        <div class="inherited-from">inherited from <a href="../dart_web_toolkit_animation/Animation.html">Animation</a> </div><div class="doc">
<p>Is the animation running, even if it hasn't started yet.</p>
<pre class="source">
bool running = false
</pre>
</div>
</div>
<div class="field inherited"><h4 id="scheduler">
<button class="show-code">Code</button>
<a href="../dart_web_toolkit_animation/AnimationScheduler.html">AnimationScheduler</a>         <strong>scheduler</strong> <a class="anchor-link"
            href="#scheduler"
            title="Permalink to ResizeAnimation.scheduler">#</a>
        </h4>
        <div class="inherited-from">inherited from <a href="../dart_web_toolkit_animation/Animation.html">Animation</a> </div><div class="doc">
<pre class="source">
AnimationScheduler scheduler
</pre>
</div>
</div>
<div class="field"><h4 id="showing">
<button class="show-code">Code</button>
bool         <strong>showing</strong> <a class="anchor-link"
            href="#showing"
            title="Permalink to ResizeAnimation.showing">#</a>
        </h4>
        <div class="doc">
<p>A bool indicating whether we are showing or hiding the popup.</p>
<pre class="source">
bool showing = false
</pre>
</div>
</div>
<div class="field"><h4 id="showTimer">
<button class="show-code">Code</button>
<a href="../dart_web_toolkit_util/Timer.html">Timer</a>         <strong>showTimer</strong> <a class="anchor-link"
            href="#showTimer"
            title="Permalink to ResizeAnimation.showTimer">#</a>
        </h4>
        <div class="doc">
<p>The timer used to delay the show animation.</p>
<pre class="source">
Timer showTimer
</pre>
</div>
</div>
<div class="field inherited"><h4 id="startTime">
<button class="show-code">Code</button>
int         <strong>startTime</strong> <a class="anchor-link"
            href="#startTime"
            title="Permalink to ResizeAnimation.startTime">#</a>
        </h4>
        <div class="inherited-from">inherited from <a href="../dart_web_toolkit_animation/Animation.html">Animation</a> </div><div class="doc">
<p>The start time of the {@link Animation}.</p>
<pre class="source">
int startTime = -1
</pre>
</div>
</div>
<div class="field inherited"><h4 id="wasStarted">
<button class="show-code">Code</button>
bool         <strong>wasStarted</strong> <a class="anchor-link"
            href="#wasStarted"
            title="Permalink to ResizeAnimation.wasStarted">#</a>
        </h4>
        <div class="inherited-from">inherited from <a href="../dart_web_toolkit_animation/Animation.html">Animation</a> </div><div class="doc">
<p>Did the animation start before {@link #cancel()} was called.</p>
<pre class="source">
bool wasStarted = false
</pre>
</div>
</div>
</div>
<div>
<h3>Methods</h3>
<div class="method inherited"><h4 id="cancel">
<button class="show-code">Code</button>
void <strong>cancel</strong>() <a class="anchor-link" href="#cancel"
              title="Permalink to ResizeAnimation.cancel">#</a></h4>
<div class="inherited-from">inherited from <a href="../dart_web_toolkit_animation/Animation.html">Animation</a> </div><div class="doc">
<p>Immediately cancel this animation. If the animation is running or is
scheduled to run, {@link #onCancel()} will be called.</p>
<pre class="source">
void cancel() {
 // Ignore if the animation is not currently running.
 if (!running) {
   return;
 }

 // Reset the state.
 wasStarted = isStarted; // Used by onCancel.
 element = null;
 running = false;
 isStarted = false;

 // Cancel the animation request.
 if (requestHandle != null) {
   requestHandle.cancel();
   requestHandle = null;
 }

 onCancel();
}
</pre>
</div>
</div>
<div class="method"><h4 id="getRectString">
<button class="show-code">Code</button>
String <strong>getRectString</strong>(int top, int right, int bottom, int left) <a class="anchor-link" href="#getRectString"
              title="Permalink to ResizeAnimation.getRectString">#</a></h4>
<div class="doc">
<p>Returns a rect string.</p>
<pre class="source">
String getRectString(int top, int right, int bottom, int left) {
 return "rect(${top}px, ${right}px, ${bottom}px, ${left}px)";
}
</pre>
</div>
</div>
<div class="method inherited"><h4 id="interpolate">
<button class="show-code">Code</button>
double <strong>interpolate</strong>(double progress) <a class="anchor-link" href="#interpolate"
              title="Permalink to ResizeAnimation.interpolate">#</a></h4>
<div class="inherited-from">inherited from <a href="../dart_web_toolkit_animation/Animation.html">Animation</a> </div><div class="doc">
<p>Interpolate the linear progress into a more natural easing function.</p>
<p>Depending on the {@link Animation}, the return value of this method can be
less than 0.0 or greater than 1.0.</p>
<p>@param progress the linear progress, between 0.0 and 1.0
@return the interpolated progress</p>
<pre class="source">
double interpolate(double progress) {
 return (1 + dart_math.cos(dart_math.PI + progress * dart_math.PI)) / 2;
}
</pre>
</div>
</div>
<div class="method inherited"><h4 id="isRunning">
<button class="show-code">Code</button>
bool <strong>isRunning</strong>(int curRunId) <a class="anchor-link" href="#isRunning"
              title="Permalink to ResizeAnimation.isRunning">#</a></h4>
<div class="inherited-from">inherited from <a href="../dart_web_toolkit_animation/Animation.html">Animation</a> </div><div class="doc">
<p>Check if the specified run ID is still being run.</p>
<p>@param curRunId the current run ID to check
@return true if running, false if canceled or restarted</p>
<pre class="source">
bool isRunning(int curRunId) {
 return running &amp;&amp; (runId == curRunId);
}
</pre>
</div>
</div>
<div class="method"><h4 id="maybeShowGlass">
<button class="show-code">Code</button>
void <strong>maybeShowGlass</strong>() <a class="anchor-link" href="#maybeShowGlass"
              title="Permalink to ResizeAnimation.maybeShowGlass">#</a></h4>
<div class="doc">
<p>Show or hide the glass.</p>
<pre class="source">
void maybeShowGlass() {
 if (showing) {
   if (curPanel._isGlassEnabled) {
     dart_html.document.body.append(curPanel.glass);
     PopupPanel.impl.onShow(curPanel.glass);

//        resizeRegistration = dart_html.document.window.addResizeHandler(curPanel.glassResizer);
     curPanel.glassResizer.onResize(null);

     glassShowing = true;
   }
 } else if (glassShowing) {
   //dart_html.document.body.removeChild(curPanel.glass);
   curPanel.glass.remove();
   PopupPanel.impl.onHide(curPanel.glass);

//      resizeRegistration.removeHandler();
//      resizeRegistration = null;

   glassShowing = false;
 }
}
</pre>
</div>
</div>
<div class="method inherited"><h4 id="onCancel">
<button class="show-code">Code</button>
void <strong>onCancel</strong>() <a class="anchor-link" href="#onCancel"
              title="Permalink to ResizeAnimation.onCancel">#</a></h4>
<div class="inherited-from">inherited from <a href="../dart_web_toolkit_animation/Animation.html">Animation</a> </div><div class="doc">
<p>Called immediately after the animation is canceled. The default
implementation of this method calls {@link #onComplete()} only if the
animation has actually started running.</p>
<pre class="source">
void onCancel() {
 if (wasStarted) {
   onComplete();
 }
}
</pre>
</div>
</div>
<div class="method"><h4 id="onComplete">
<button class="show-code">Code</button>
void <strong>onComplete</strong>() <a class="anchor-link" href="#onComplete"
              title="Permalink to ResizeAnimation.onComplete">#</a></h4>
<div class="doc">
<div class="inherited">
<p>Called immediately after the animation completes.</p>
<div class="docs-inherited-from">docs inherited from <a href="../dart_web_toolkit_animation/Animation.html">Animation</a> </div></div>
<pre class="source">
void onComplete() {
 if (!showing) {
   maybeShowGlass();
   if (!isUnloading) {
     RootPanel.get().remove(curPanel);
   }
   PopupPanel.impl.onHide(curPanel.getElement());
 }
 PopupPanel.impl.setClip(curPanel.getElement(), "rect(auto, auto, auto, auto)");
 Dom.setStyleAttribute(curPanel.getElement(), "overflow", "visible");
}
</pre>
</div>
</div>
<div class="method"><h4 id="onInstantaneousRun">
<button class="show-code">Code</button>
void <strong>onInstantaneousRun</strong>() <a class="anchor-link" href="#onInstantaneousRun"
              title="Permalink to ResizeAnimation.onInstantaneousRun">#</a></h4>
<div class="doc">
<pre class="source">
void onInstantaneousRun() {
 maybeShowGlass();
 if (showing) {
   // Set the position attribute, and then attach to the Dom. Otherwise,
   // the PopupPanel will appear to 'jump' from its static/relative
   // position to its absolute position (issue #1231).
   Dom.setStyleAttribute(curPanel.getElement(), "position", "absolute");
   if (curPanel.topPosition != -1) {
     curPanel.setPopupPosition(curPanel.leftPosition, curPanel.topPosition);
   }
   RootPanel.get().add(curPanel);
   PopupPanel.impl.onShow(curPanel.getElement());
 } else {
   if (!isUnloading) {
     RootPanel.get().remove(curPanel);
   }
   PopupPanel.impl.onHide(curPanel.getElement());
 }
 Dom.setStyleAttribute(curPanel.getElement(), "overflow", "visible");
}
</pre>
</div>
</div>
<div class="method"><h4 id="onStart">
<button class="show-code">Code</button>
void <strong>onStart</strong>() <a class="anchor-link" href="#onStart"
              title="Permalink to ResizeAnimation.onStart">#</a></h4>
<div class="doc">
<div class="inherited">
<p>Called immediately before the animation starts.</p>
<div class="docs-inherited-from">docs inherited from <a href="../dart_web_toolkit_animation/Animation.html">Animation</a> </div></div>
<pre class="source">
void onStart() {
 offsetHeight = curPanel.getOffsetHeight();
 offsetWidth = curPanel.getOffsetWidth();
 Dom.setStyleAttribute(curPanel.getElement(), "overflow", "hidden");
 super.onStart();
}
</pre>
</div>
</div>
<div class="method"><h4 id="onUpdate">
<button class="show-code">Code</button>
void <strong>onUpdate</strong>(double progress) <a class="anchor-link" href="#onUpdate"
              title="Permalink to ResizeAnimation.onUpdate">#</a></h4>
<div class="doc">
<div class="inherited">
<p>Called when the animation should be updated.</p>
<p>The value of progress is between 0.0 and 1.0 (inclusive) (unless you
override the {@link #interpolate(double)} method to provide a wider range
of values). You can override {@link #onStart()} and {@link #onComplete()}
to perform setup and tear down procedures.</p>
<p>@param progress a double, normally between 0.0 and 1.0 (inclusive)</p>
<div class="docs-inherited-from">docs inherited from <a href="../dart_web_toolkit_animation/Animation.html">Animation</a> </div></div>
<pre class="source">
void onUpdate(double progress) {
 if (!showing) {
   progress = 1.0 - progress;
 }

 // Determine the clipping size
 int top = 0;
 int left = 0;
 int right = 0;
 int bottom = 0;
 int height = (progress * offsetHeight).toInt();
 int width = (progress * offsetWidth).toInt();
 switch (curPanel.animType) {
   case AnimationType.ROLL_DOWN:
     right = offsetWidth;
     bottom = height;
     break;
   case AnimationType.CENTER:
     top = (offsetHeight - height) &gt;&gt; 1;
     left = (offsetWidth - width) &gt;&gt; 1;
     right = left + width;
     bottom = top + height;
     break;
   case AnimationType.ONE_WAY_CORNER:
     if (LocaleInfo.getCurrentLocale().isRTL()) {
       left = offsetWidth - width;
     }
     right = left + width;
     bottom = top + height;
     break;
 }
 // Set the rect clipping
 PopupPanel.impl.setClip(curPanel.getElement(), getRectString(top, right, bottom, left));
}
</pre>
</div>
</div>
<div class="method inherited"><h4 id="run">
<button class="show-code">Code</button>
void <strong>run</strong>(int duration, {int startTime: null, Element element: null}) <a class="anchor-link" href="#run"
              title="Permalink to ResizeAnimation.run">#</a></h4>
<div class="inherited-from">inherited from <a href="../dart_web_toolkit_animation/Animation.html">Animation</a> </div><div class="doc">
<p>Run this animation at the given startTime. If the startTime has already
passed, the animation will run synchronously as if it started at the
specified start time. If the animation is already running, it will be
canceled first.
&lt;p>
If the element is not &lt;code>null&lt;/code>, the {@link #onUpdate(double)}
method might be called only if the element may be visible (generally left
at the appreciation of the browser). Otherwise, it will be called
unconditionally.</p>
<p>@param duration the duration of the animation in milliseconds
@param startTime the synchronized start time in milliseconds
@param element the element that visually bounds the entire animation</p>
<pre class="source">
void run(int duration, {int startTime:null, dart_html.Element element:null}) {
 // Cancel the animation if it is running
 cancel();

 if (startTime == null) {
   startTime = (new DateTime.now()).millisecondsSinceEpoch;
 }

 // Save the duration and startTime
 running = true;
 isStarted = false;
 this.duration = duration;
 this.startTime = startTime;
 this.element = element;
 ++runId;

 // Execute the first callback.
 callback.execute((new DateTime.now()).millisecondsSinceEpoch);
}
</pre>
</div>
</div>
<div class="method"><h4 id="setState">
<button class="show-code">Code</button>
void <strong>setState</strong>(bool showing, bool isUnloading) <a class="anchor-link" href="#setState"
              title="Permalink to ResizeAnimation.setState">#</a></h4>
<div class="doc">
<p>Open or close the content. This method always called immediately after
the PopupPanel showing state has changed, so we base the animation on the
current state.</p>
<p>@param showing true if the popup is showing, false if not</p>
<pre class="source">
void setState(bool showing, bool isUnloading) {
 // Immediately complete previous open/close animation
 this.isUnloading = isUnloading;
 cancel();

 // If there is a pending timer to start a show animation, then just cancel
 // the timer and complete the show operation.
 if (showTimer != null) {
   showTimer.cancel();
   showTimer = null;
   onComplete();
 }

 // Update the logical state.
 curPanel.showing = showing;
 curPanel.updateHandlers();

 // Determine if we need to animate
 bool animate = !isUnloading &amp;&amp; curPanel._isAnimationEnabled;
 if (curPanel.animType != AnimationType.CENTER &amp;&amp; !showing) {
   animate = false;
 }

 // Open the new item
 this.showing = showing;
 if (animate) {
   // impl.onShow takes some time to complete, so we do it before starting
   // the animation. If we move this to onStart, the animation will look
   // choppy or not run at all.
   if (showing) {
     maybeShowGlass();

     // Set the position attribute, and then attach to the Dom. Otherwise,
     // the PopupPanel will appear to 'jump' from its static/relative
     // position to its absolute position (issue #1231).
     Dom.setStyleAttribute(curPanel.getElement(), "position", "absolute");
     if (curPanel.topPosition != -1) {
       curPanel.setPopupPosition(curPanel.leftPosition,
           curPanel.topPosition);
     }
     PopupPanel.impl.setClip(curPanel.getElement(), getRectString(0, 0, 0, 0));
     RootPanel.get().add(curPanel);
     PopupPanel.impl.onShow(curPanel.getElement());

     // Wait for the popup panel and iframe to be attached before running
     // the animation. We use a Timer instead of a DeferredCommand so we
     // can cancel it if the popup is hidden synchronously.
     showTimer = new Timer.get(() {
       showTimer = null;
       run(PopupPanel.ANIMATION_DURATION);
     });
     showTimer.schedule(1);
   } else {
     run(PopupPanel.ANIMATION_DURATION);
   }
 } else {
   onInstantaneousRun();
 }
}
</pre>
</div>
</div>
<div class="method inherited"><h4 id="update">
<button class="show-code">Code</button>
bool <strong>update</strong>(int curTime) <a class="anchor-link" href="#update"
              title="Permalink to ResizeAnimation.update">#</a></h4>
<div class="inherited-from">inherited from <a href="../dart_web_toolkit_animation/Animation.html">Animation</a> </div><div class="doc">
<p>Update the {@link Animation}.</p>
<p>@param curTime the current time
@return true if the animation should run again, false if it is complete</p>
<pre class="source">
bool update(int curTime) {
 /*
  * Save the run id. If the runId is incremented during this execution block,
  * we know that this run has been canceled.
  */
 int curRunId = runId;

 bool finished = curTime &gt;= startTime + duration;
 if (isStarted &amp;&amp; !finished) {
   // Animation is in progress.
   double progress = (curTime - startTime) / duration;
   onUpdate(interpolate(progress));
   return isRunning(curRunId); // Check if this run was canceled.
 }
 if (!isStarted &amp;&amp; curTime &gt;= startTime) {
   /*
    * Start the animation. We do not call onUpdate() because onStart() calls
    * onUpdate() by default.
    */
   isStarted = true;
   onStart();
   if (!isRunning(curRunId)) {
     // This run was canceled.
     return false;
   }
   // Intentional fall through to possibly end the animation.
 }
 if (finished) {
   // Animation is complete.
   running = false;
   isStarted = false;
   onComplete();
   return false;
 }
 return true;
}
</pre>
</div>
</div>
</div>
        </div>
        <div class="clear"></div>
        </div>
        <div class="footer">
          <div>This page was generated at 2013-06-20 08:56:04.237</div>
        </div>
        <script async src="../client-live-nav.js"></script>
        </body></html>
        
