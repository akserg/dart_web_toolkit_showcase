        <!DOCTYPE html>
        <html>
        <head>
                <meta charset="utf-8">
        <title>TimeZone class / dart_web_toolkit_i18n Library / API Reference / Dart Web Toolkit</title>
        <link rel="stylesheet" type="text/css"
            href="../styles.css">
        <link href="//fonts.googleapis.com/css?family=Open+Sans:400,600,700,800" rel="stylesheet" type="text/css">
        <link rel="shortcut icon" href="../favicon.ico">
        
        <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-40672112-1']);
  _gaq.push(['_setDomainName', 'dartwebtoolkit.com']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
        <body data-library="dart_web_toolkit_i18n" data-type="TimeZone">
        <div class="page">
        <div class="header">
          <a href="../index.html"><div class="logo"></div></a>
          <a href="../index.html">API Reference 0.3.10+3</a>
         &rsaquo; <a href="../dart_web_toolkit_i18n.html">dart_web_toolkit_i18n</a> &rsaquo; <a href="../dart_web_toolkit_i18n/TimeZone.html">TimeZone</a>        <div id="search-box">
          <input type="search" name="q" id="q" autocomplete="off"
              class="search-input" placeholder="Search API">
        </div>
        
      </div>
      <div class="drop-down" id="drop-down"></div>
      
        <div class="nav">
        
</div>
<div class="content">
        <h2><strong>TimeZone</strong>
          class
        </h2>
        
<button id="show-inherited" class="show-inherited">Hide inherited</button>
<div class="doc">
<p>The TimeZone class implements a time zone information source for client
applications. The time zone object is instantiated from a TimeZoneData object,
which is made from a JSON string that contains all the data needed for
the specified time zone. Applications can instantiate a time zone statically,
in which case the data could be retrieved from
the {@link com.google.gwt.i18n.client.constants.TimeZoneConstants TimeZoneConstants}
class. Applications can also choose to instantiate from a string obtained
from a server. The time zone string contains locale specific data. If the
application only uses a short representation, the English data will usually
satisfy the user's need. In the case that only the time zone offset is known,
there is a decent fallback that only uses the time zone offset to create a
TimeZone object.</p>
<pre class="source">
class TimeZone {
// constants to reference time zone names in the time zone names array
 static final int _STD_SHORT_NAME = 0;
 static final int _STD_LONG_NAME = 1;
 static final int _DLT_SHORT_NAME = 2;
 static final int _DLT_LONG_NAME = 3;

 /**
  * This factory method provides a decent fallback to create a time zone object
  * just based on a given time zone offset.
  *
  * @param timeZoneOffsetInMinutes time zone offset in minutes
  * @return a new time zone object
  */
 static TimeZone createTimeZone(int timeZoneOffsetInMinutes) {
   TimeZone tz = new TimeZone();
   tz._standardOffset = timeZoneOffsetInMinutes;
   tz._timezoneID = _composePOSIXTimeZoneID(timeZoneOffsetInMinutes);
   tz._tzNames = new List&lt;String&gt;(2);
   tz._tzNames[0] = _composeUTCString(timeZoneOffsetInMinutes);
   tz._tzNames[1] = _composeUTCString(timeZoneOffsetInMinutes);
   tz._transitionPoints = null;
   tz._adjustments = null;
   return tz;
 }

 /**
  * This factory method creates a time zone instance from a JSON string that
  * contains the time zone information for desired time zone. Applications can
  * get such a string from the TimeZoneConstants class, or it can request the
  * string from the server. Either way, the application obtains the original
  * string from the data provided in the TimeZoneConstant.properties file,
  * which was carefully prepared from CLDR and Olson time zone database.
  *
  * @param tzJSON JSON string that contains time zone data
  * @return a new time zone object
  */
//  static TimeZone createTimeZoneFromJson(String tzJSON) {
//    TimeZoneInfo tzData = TimeZoneInfo.buildTimeZoneData(tzJSON);
//
//    return createTimeZoneFromInfo(tzData);
//  }

//  static TimeZone createTimeZoneFromInfo(TimeZoneInfo timezoneData) {
//    TimeZone tz = new TimeZone();
//
//    tz._timezoneID = timezoneData.getID();
//    tz._standardOffset = -timezoneData.getStandardOffset();
//
//    List&lt;String&gt; jsTimezoneNames = timezoneData.getNames();
//
//    tz._tzNames = new List&lt;String&gt;(jsTimezoneNames.length);
//
//    for (int i = 0; i &lt; jsTimezoneNames.length; i++) {
//      tz._tzNames[i] = jsTimezoneNames[i];
//    }
//
//    List&lt;int&gt; transitions = timezoneData.getTransitions();
//
//    if (transitions == null || transitions.length == 0) {
//      tz._transitionPoints = null;
//      tz._adjustments = null;
//    } else {
//      int transitionNum = transitions.length ~/ 2;
//      tz._transitionPoints = new List&lt;int&gt;(transitionNum);
//      tz._adjustments = new List&lt;int&gt;(transitionNum);
//
//      for (int i = 0; i &lt; transitionNum; ++i) {
//        tz._transitionPoints[i] = transitions[i * 2];
//        tz._adjustments[i] = transitions[i * 2 + 1];
//      }
//    }
//    return tz;
//  }

 /**
  * In GMT representation, +/- has reverse sign of time zone offset.
  * when offset == 480, it should output GMT-08:00.
  */
 static String _composeGMTString(int offset) {
   List&lt;int&gt; data = 'GMT-00:00'.codeUnits;
   if (offset &lt;= 0) {
     data[3] = '+'.codeUnitAt(0);
     offset = -offset; // suppress the '-' sign for text display.
   }
   data[4] += (offset ~/ 60) ~/ 10;
   data[5] += (offset ~/ 60) % 10;
   data[7] += (offset % 60) ~/ 10;
   data[8] += offset % 10;
   return new String.fromCharCodes(data);
 }

 /**
  * POSIX time zone ID as fallback.
  */
 static String _composePOSIXTimeZoneID(int offset) {
   if (offset == 0) {
     return "Etc/GMT";
   }
   String str;
   if (offset &lt; 0) {
     offset = -offset;
     str = "Etc/GMT-";
   } else {
     str = "Etc/GMT+";
   }
   return str +  _offsetDisplay(offset);
 }

 static String _composeUTCString(int offset) {
   if (offset == 0) {
     return "UTC";
   }
   String str;
   if (offset &lt; 0) {
     offset = -offset;
     str = "UTC+";
   } else {
     str = "UTC-";
   }
   return str +  _offsetDisplay(offset);
 }

 static String _offsetDisplay(int offset) {
   int hour = offset ~/ 60;
   int mins = offset % 60;
   if (mins == 0) {
     return hour.toString();
   }
   return hour.toString() + ":" + mins.toString();
 }

 String _timezoneID;
 int _standardOffset;
 List&lt;String&gt; _tzNames;
 List&lt;int&gt; _transitionPoints;
 List&lt;int&gt;  _adjustments;

 TimeZone() {
 }

 /* (non-Javadoc)
  * @see com.google.gwt.i18n.client.TimeZoneIntf#getDaylightAdjustment(java.util.DateTime)
  */
 int getDaylightAdjustment(DateTime date) {
   if (_transitionPoints == null) {
     return 0;
   }
   int timeInHours = date.millisecond ~/ 1000 ~/ 3600;
   int index = 0;
   while (index &lt; _transitionPoints.length &amp;&amp;
       timeInHours &gt;= _transitionPoints[index]) {
     ++index;
   }
   return (index == 0) ? 0 : _adjustments[index - 1];
 }

 /* (non-Javadoc)
  * @see com.google.gwt.i18n.client.TimeZoneIntf#getGMTString(java.util.DateTime)
  */
 String getGMTString(DateTime date) {
   return _composeGMTString(getOffset(date));
 }

 /* (non-Javadoc)
  * @see com.google.gwt.i18n.client.TimeZoneIntf#getID()
  */
 String getID() {
   return _timezoneID;
 }

 /* (non-Javadoc)
  * @see com.google.gwt.i18n.client.TimeZoneIntf#getISOTimeZoneString(java.util.DateTime)
  */
 String getISOTimeZoneString(DateTime date) {
   int offset = -getOffset(date);
   //
   List&lt;int&gt; data = '+00:00'.codeUnits;
   if (offset &lt; 0) {
     data[0] = '-'.codeUnitAt(0);
     offset = -offset; // suppress the '-' sign for text display.
   }
   data[1] += (offset ~/ 60) ~/ 10;
   data[2] += (offset ~/ 60) % 10;
   data[4] += (offset % 60) ~/ 10;
   data[5] += offset % 10;
   return new String.fromCharCodes(data);
 }

 /* (non-Javadoc)
  * @see com.google.gwt.i18n.client.TimeZoneIntf#getLongName(java.util.DateTime)
  */
 String getLongName(DateTime date) {
   return _tzNames[isDaylightTime(date) ? _DLT_LONG_NAME : _STD_LONG_NAME];
 }

 /* (non-Javadoc)
  * @see com.google.gwt.i18n.client.TimeZoneIntf#getOffset(java.util.DateTime)
  */
 int getOffset(DateTime date) {
   return _standardOffset - getDaylightAdjustment(date);
 }

 /* (non-Javadoc)
  * @see com.google.gwt.i18n.client.TimeZoneIntf#getRFCTimeZoneString(java.util.DateTime)
  */
 String getRFCTimeZoneString(DateTime date) {
   int offset = -getOffset(date);
   //
   List&lt;int&gt; data = '+0000'.codeUnits;
   if (offset &lt; 0) {
     data[0] = '-'.codeUnitAt(0);
     offset = -offset; // suppress the '-' sign for text display.
   }
   data[1] += (offset ~/ 60) ~/ 10;
   data[2] += (offset ~/ 60) % 10;
   data[3] += (offset % 60) ~/ 10;
   data[4] += offset % 10;
   return  new String.fromCharCodes(data);
 }

 /* (non-Javadoc)
  * @see com.google.gwt.i18n.client.TimeZoneIntf#getShortName(java.util.DateTime)
  */
 String getShortName(DateTime date) {
   return _tzNames[isDaylightTime(date) ? _DLT_SHORT_NAME : _STD_SHORT_NAME];
 }

 /* (non-Javadoc)
  * @see com.google.gwt.i18n.client.TimeZoneIntf#getStandardOffset()
  */
 int getStandardOffset() {
   return _standardOffset;
 }

 /* (non-Javadoc)
  * @see com.google.gwt.i18n.client.TimeZoneIntf#isDaylightTime(java.util.DateTime)
  */
 bool isDaylightTime(DateTime date) {
   return getDaylightAdjustment(date) &gt; 0;
 }
}
</pre>
</div>
<div>
<h3>Static Methods</h3>
<div class="method"><h4 id="createTimeZone">
<button class="show-code">Code</button>
<a href="../dart_web_toolkit_i18n/TimeZone.html">TimeZone</a> <strong>createTimeZone</strong>(int timeZoneOffsetInMinutes) <a class="anchor-link" href="#createTimeZone"
              title="Permalink to TimeZone.createTimeZone">#</a></h4>
<div class="doc">
<p>This factory method provides a decent fallback to create a time zone object
just based on a given time zone offset.</p>
<p>@param timeZoneOffsetInMinutes time zone offset in minutes
@return a new time zone object</p>
<pre class="source">
static TimeZone createTimeZone(int timeZoneOffsetInMinutes) {
 TimeZone tz = new TimeZone();
 tz._standardOffset = timeZoneOffsetInMinutes;
 tz._timezoneID = _composePOSIXTimeZoneID(timeZoneOffsetInMinutes);
 tz._tzNames = new List&lt;String&gt;(2);
 tz._tzNames[0] = _composeUTCString(timeZoneOffsetInMinutes);
 tz._tzNames[1] = _composeUTCString(timeZoneOffsetInMinutes);
 tz._transitionPoints = null;
 tz._adjustments = null;
 return tz;
}
</pre>
</div>
</div>
</div>
<div>
<h3>Constructors</h3>
<div class="method"><h4 id="TimeZone">
<button class="show-code">Code</button>
new <strong>TimeZone</strong>() <a class="anchor-link" href="#TimeZone"
              title="Permalink to TimeZone.TimeZone">#</a></h4>
<div class="doc">
<pre class="source">
TimeZone() {
}
</pre>
</div>
</div>
</div>
<div>
<h3>Methods</h3>
<div class="method"><h4 id="getDaylightAdjustment">
<button class="show-code">Code</button>
int <strong>getDaylightAdjustment</strong>(DateTime date) <a class="anchor-link" href="#getDaylightAdjustment"
              title="Permalink to TimeZone.getDaylightAdjustment">#</a></h4>
<div class="doc">
<pre class="source">
int getDaylightAdjustment(DateTime date) {
 if (_transitionPoints == null) {
   return 0;
 }
 int timeInHours = date.millisecond ~/ 1000 ~/ 3600;
 int index = 0;
 while (index &lt; _transitionPoints.length &amp;&amp;
     timeInHours &gt;= _transitionPoints[index]) {
   ++index;
 }
 return (index == 0) ? 0 : _adjustments[index - 1];
}
</pre>
</div>
</div>
<div class="method"><h4 id="getGMTString">
<button class="show-code">Code</button>
String <strong>getGMTString</strong>(DateTime date) <a class="anchor-link" href="#getGMTString"
              title="Permalink to TimeZone.getGMTString">#</a></h4>
<div class="doc">
<pre class="source">
String getGMTString(DateTime date) {
 return _composeGMTString(getOffset(date));
}
</pre>
</div>
</div>
<div class="method"><h4 id="getID">
<button class="show-code">Code</button>
String <strong>getID</strong>() <a class="anchor-link" href="#getID"
              title="Permalink to TimeZone.getID">#</a></h4>
<div class="doc">
<pre class="source">
String getID() {
 return _timezoneID;
}
</pre>
</div>
</div>
<div class="method"><h4 id="getISOTimeZoneString">
<button class="show-code">Code</button>
String <strong>getISOTimeZoneString</strong>(DateTime date) <a class="anchor-link" href="#getISOTimeZoneString"
              title="Permalink to TimeZone.getISOTimeZoneString">#</a></h4>
<div class="doc">
<pre class="source">
String getISOTimeZoneString(DateTime date) {
 int offset = -getOffset(date);
 //
 List&lt;int&gt; data = '+00:00'.codeUnits;
 if (offset &lt; 0) {
   data[0] = '-'.codeUnitAt(0);
   offset = -offset; // suppress the '-' sign for text display.
 }
 data[1] += (offset ~/ 60) ~/ 10;
 data[2] += (offset ~/ 60) % 10;
 data[4] += (offset % 60) ~/ 10;
 data[5] += offset % 10;
 return new String.fromCharCodes(data);
}
</pre>
</div>
</div>
<div class="method"><h4 id="getLongName">
<button class="show-code">Code</button>
String <strong>getLongName</strong>(DateTime date) <a class="anchor-link" href="#getLongName"
              title="Permalink to TimeZone.getLongName">#</a></h4>
<div class="doc">
<pre class="source">
String getLongName(DateTime date) {
 return _tzNames[isDaylightTime(date) ? _DLT_LONG_NAME : _STD_LONG_NAME];
}
</pre>
</div>
</div>
<div class="method"><h4 id="getOffset">
<button class="show-code">Code</button>
int <strong>getOffset</strong>(DateTime date) <a class="anchor-link" href="#getOffset"
              title="Permalink to TimeZone.getOffset">#</a></h4>
<div class="doc">
<pre class="source">
int getOffset(DateTime date) {
 return _standardOffset - getDaylightAdjustment(date);
}
</pre>
</div>
</div>
<div class="method"><h4 id="getRFCTimeZoneString">
<button class="show-code">Code</button>
String <strong>getRFCTimeZoneString</strong>(DateTime date) <a class="anchor-link" href="#getRFCTimeZoneString"
              title="Permalink to TimeZone.getRFCTimeZoneString">#</a></h4>
<div class="doc">
<pre class="source">
String getRFCTimeZoneString(DateTime date) {
 int offset = -getOffset(date);
 //
 List&lt;int&gt; data = '+0000'.codeUnits;
 if (offset &lt; 0) {
   data[0] = '-'.codeUnitAt(0);
   offset = -offset; // suppress the '-' sign for text display.
 }
 data[1] += (offset ~/ 60) ~/ 10;
 data[2] += (offset ~/ 60) % 10;
 data[3] += (offset % 60) ~/ 10;
 data[4] += offset % 10;
 return  new String.fromCharCodes(data);
}
</pre>
</div>
</div>
<div class="method"><h4 id="getShortName">
<button class="show-code">Code</button>
String <strong>getShortName</strong>(DateTime date) <a class="anchor-link" href="#getShortName"
              title="Permalink to TimeZone.getShortName">#</a></h4>
<div class="doc">
<pre class="source">
String getShortName(DateTime date) {
 return _tzNames[isDaylightTime(date) ? _DLT_SHORT_NAME : _STD_SHORT_NAME];
}
</pre>
</div>
</div>
<div class="method"><h4 id="getStandardOffset">
<button class="show-code">Code</button>
int <strong>getStandardOffset</strong>() <a class="anchor-link" href="#getStandardOffset"
              title="Permalink to TimeZone.getStandardOffset">#</a></h4>
<div class="doc">
<pre class="source">
int getStandardOffset() {
 return _standardOffset;
}
</pre>
</div>
</div>
<div class="method"><h4 id="isDaylightTime">
<button class="show-code">Code</button>
bool <strong>isDaylightTime</strong>(DateTime date) <a class="anchor-link" href="#isDaylightTime"
              title="Permalink to TimeZone.isDaylightTime">#</a></h4>
<div class="doc">
<pre class="source">
bool isDaylightTime(DateTime date) {
 return getDaylightAdjustment(date) &gt; 0;
}
</pre>
</div>
</div>
</div>
        </div>
        <div class="clear"></div>
        </div>
        <div class="footer">
          <div>This page was generated at 2013-05-13 23:16:40.359</div>
        </div>
        <script async src="../client-live-nav.js"></script>
        </body></html>
        
