        <!DOCTYPE html>
        <html>
        <head>
                <meta charset="utf-8">
        <title>LayoutImpl class / dart_web_toolkit_layout Library / API Reference / Dart Web Toolkit</title>
        <link rel="stylesheet" type="text/css"
            href="../styles.css">
        <link href="//fonts.googleapis.com/css?family=Open+Sans:400,600,700,800" rel="stylesheet" type="text/css">
        <link rel="shortcut icon" href="../favicon.ico">
        
        <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-40672112-1']);
  _gaq.push(['_setDomainName', 'dartwebtoolkit.com']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
        <body data-library="dart_web_toolkit_layout" data-type="LayoutImpl">
        <div class="page">
        <div class="header">
          <a href="../index.html"><div class="logo"></div></a>
          <a href="../index.html">API Reference 0.3.12</a>
         &rsaquo; <a href="../dart_web_toolkit_layout.html">dart_web_toolkit_layout</a> &rsaquo; <a href="../dart_web_toolkit_layout/LayoutImpl.html">LayoutImpl</a>        <div id="search-box">
          <input type="search" name="q" id="q" autocomplete="off"
              class="search-input" placeholder="Search API">
        </div>
        
      </div>
      <div class="drop-down" id="drop-down"></div>
      
        <div class="nav">
        
</div>
<div class="content">
        <h2><strong>LayoutImpl</strong>
          class
        </h2>
        
<button id="show-inherited" class="show-inherited">Hide inherited</button>
<div class="doc">
<p>Default implementation, which works with all browsers except for IE6. It uses
only the "top", "left", "bottom", "right", "width", and "height" CSS
properties.</p>
<p>Note: This implementation class has state, so {@link Layout} must create a
new instance for each layout-parent.</p>
<pre class="source">
class LayoutImpl {

 static dart_html.DivElement fixedRuler;
 static bool _initialised = false;

 factory LayoutImpl.browserDependent() {
   if (!_initialised) {
     _initialised = true;
     fixedRuler = createRuler(Unit.CM, Unit.CM);
     dart_html.document.body.append(fixedRuler);
   }
   return new LayoutImpl._internal();
 }

 static dart_html.DivElement createRuler(Unit widthUnit, Unit heightUnit) {
   dart_html.DivElement ruler = new dart_html.DivElement();
   ruler.innerHtml = "&amp;nbsp;";
   ruler.style.position = Position.ABSOLUTE.value;
   ruler.style.zIndex = "-32767";

   // Position the ruler off the top edge, double the size just to be
   // extra sure it doesn't show up on the screen.
   ruler.style.top = "-20" + heightUnit.value;

   // Note that we are making the ruler element 10x10, because some browsers
   // generate non-integral ratios (e.g., 1em == 13.3px), so we need a little
   // extra precision.
   ruler.style.width = "10" + widthUnit.value;
   ruler.style.height = "10" + heightUnit.value;
   return ruler;
 }

 LayoutImpl._internal();

 dart_html.DivElement relativeRuler;

 dart_html.Element attachChild(dart_html.Element parent, dart_html.Element child, dart_html.Element before) {
   dart_html.DivElement container = new dart_html.DivElement();
   container.append(child);

   container.style.position = Position.ABSOLUTE.value;
   container.style.overflow = Overflow.HIDDEN.value;
   // I have added that code here because without it it doesn't show itself and child elements
   container.style.left = "0" + Unit.PX.value;
   container.style.top = "0" + Unit.PX.value;
   container.style.right = "0" + Unit.PX.value;
   container.style.bottom = "0" + Unit.PX.value;
   //
   fillParent(child);

   dart_html.Element beforeContainer = null;
   if (before != null) {
     beforeContainer = before.parent;
     assert (beforeContainer.parent == parent); // : "Element to insert before must be a sibling";
   }
   parent.insertBefore(container, beforeContainer);
   return container;
 }

 void fillParent(dart_html.Element elem) {
   elem.style.position = Position.ABSOLUTE.value;
   elem.style.left = "0" + Unit.PX.value;
   elem.style.top = "0" + Unit.PX.value;
   elem.style.right = "0" + Unit.PX.value;
   elem.style.bottom = "0" + Unit.PX.value;
 }

 /**
  * @param parent the parent element
  */
 void finalizeLayout(dart_html.Element parent) {
 }

 double getUnitSizeInPixels(dart_html.Element parent, Unit unit, bool vertical) {
   if (unit == null) {
     return 1.0;
   }

   switch (unit) {
     case Unit.PCT:
       return (vertical ? parent.client.height : parent.client.width) / 100.0;
     case Unit.EM:
       return relativeRuler.offset.width / 10.0;
     case Unit.EX:
       return relativeRuler.offset.height / 10.0;
     case Unit.CM:
       return fixedRuler.offset.width * 0.1; // 1.0 cm / cm
     case Unit.MM:
       return fixedRuler.offset.width * 0.01; // 0.1 cm / mm
     case Unit.IN:
       return fixedRuler.offset.width * 0.254; // 2.54 cm / in
     case Unit.PT:
       return fixedRuler.offset.width * 0.00353; // 0.0353 cm / pt
     case Unit.PC:
       return fixedRuler.offset.width * 0.0423; // 0.423 cm / pc

     case Unit.PX:
     default:
       return 1.0;
   }
 }

 void initParent(dart_html.Element parent) {
   parent.style.position = Position.RELATIVE.value;
   parent.append(relativeRuler = createRuler(Unit.EM, Unit.EX));
 }

 void layout(Layer layer) {
   if (layer.visible) {
     layer.container.style.display = "";
   } else {
     layer.container.style.display = Display.NONE.value;
   }

   layer.container.style.left = layer.setLeft ? (layer.left.toString() + layer.leftUnit.value) : "";
   layer.container.style.top = layer.setTop ? (layer.top.toString() + layer.topUnit.value) : "";
   layer.container.style.right = layer.setRight ? (layer.right.toString() + layer.rightUnit.value) : "";
   layer.container.style.bottom = layer.setBottom ? (layer.bottom.toString() + layer.bottomUnit.value) : "";
   layer.container.style.width = layer.setWidth ? (layer.width.toString() + layer.widthUnit.value) : "";
   layer.container.style.height = layer.setHeight ? (layer.height.toString() + layer.heightUnit.value) : "";

   switch (layer.hPos) {
     case Alignment.BEGIN:
       layer.child.style.left = "0" + Unit.PX.value;
       layer.child.style.right = "";
       break;
     case Alignment.END:
       layer.child.style.left = "";
       layer.child.style.right = "0" + Unit.PX.value;
       break;
     case Alignment.STRETCH:
       layer.child.style.left = "0" + Unit.PX.value;
       layer.child.style.right = "0" + Unit.PX.value;
       break;
   }

   switch (layer.vPos) {
     case Alignment.BEGIN:
       layer.child.style.top = "0" + Unit.PX.value;
       layer.child.style.bottom = "";
       break;
     case Alignment.END:
       layer.child.style.top = "";
       layer.child.style.bottom = "0" + Unit.PX.value;
       break;
     case Alignment.STRETCH:
       layer.child.style.top = "0" + Unit.PX.value;
       layer.child.style.bottom = "0" + Unit.PX.value;
       break;
   }
 }

 void onAttach(dart_html.Element parent) {
   // Do nothing. This exists only to help LayoutImplIE6 avoid memory leaks.
 }

 void onDetach(dart_html.Element parent) {
   // Do nothing. This exists only to help LayoutImplIE6 avoid memory leaks.
 }

 void removeChild(dart_html.Element container, dart_html.Element child) {
   container.remove();

   // We want this code to be resilient to the child having already been
   // removed from its container (perhaps by widget code).
   if (child.parent == container) {
     child.remove();
   }

   // Cleanup child styles set by fillParent().
   child.style.position = "";
   child.style.left = "";
   child.style.top = "";
   child.style.width = "";
   child.style.height = "";
 }
}
</pre>
</div>
<div>
<h3>Static Properties</h3>
<div class="field"><h4 id="fixedRuler">
<button class="show-code">Code</button>
DivElement         <strong>fixedRuler</strong> <a class="anchor-link"
            href="#fixedRuler"
            title="Permalink to LayoutImpl.fixedRuler">#</a>
        </h4>
        <div class="doc">
<pre class="source">
static dart_html.DivElement fixedRuler
</pre>
</div>
</div>
</div>
<div>
<h3>Static Methods</h3>
<div class="method"><h4 id="createRuler">
<button class="show-code">Code</button>
DivElement <strong>createRuler</strong>(<a href="../dart_web_toolkit_util/Unit.html">Unit</a> widthUnit, <a href="../dart_web_toolkit_util/Unit.html">Unit</a> heightUnit) <a class="anchor-link" href="#createRuler"
              title="Permalink to LayoutImpl.createRuler">#</a></h4>
<div class="doc">
<pre class="source">
static dart_html.DivElement createRuler(Unit widthUnit, Unit heightUnit) {
 dart_html.DivElement ruler = new dart_html.DivElement();
 ruler.innerHtml = "&amp;nbsp;";
 ruler.style.position = Position.ABSOLUTE.value;
 ruler.style.zIndex = "-32767";

 // Position the ruler off the top edge, double the size just to be
 // extra sure it doesn't show up on the screen.
 ruler.style.top = "-20" + heightUnit.value;

 // Note that we are making the ruler element 10x10, because some browsers
 // generate non-integral ratios (e.g., 1em == 13.3px), so we need a little
 // extra precision.
 ruler.style.width = "10" + widthUnit.value;
 ruler.style.height = "10" + heightUnit.value;
 return ruler;
}
</pre>
</div>
</div>
</div>
<div>
<h3>Constructors</h3>
<div class="method"><h4 id="LayoutImpl.browserDependent">
<button class="show-code">Code</button>
factory <strong>LayoutImpl.browserDependent</strong>() <a class="anchor-link" href="#LayoutImpl.browserDependent"
              title="Permalink to LayoutImpl.LayoutImpl.browserDependent">#</a></h4>
<div class="doc">
<pre class="source">
factory LayoutImpl.browserDependent() {
 if (!_initialised) {
   _initialised = true;
   fixedRuler = createRuler(Unit.CM, Unit.CM);
   dart_html.document.body.append(fixedRuler);
 }
 return new LayoutImpl._internal();
}
</pre>
</div>
</div>
</div>
<div>
<h3>Properties</h3>
<div class="field"><h4 id="relativeRuler">
<button class="show-code">Code</button>
DivElement         <strong>relativeRuler</strong> <a class="anchor-link"
            href="#relativeRuler"
            title="Permalink to LayoutImpl.relativeRuler">#</a>
        </h4>
        <div class="doc">
<pre class="source">
dart_html.DivElement relativeRuler
</pre>
</div>
</div>
</div>
<div>
<h3>Methods</h3>
<div class="method"><h4 id="attachChild">
<button class="show-code">Code</button>
Element <strong>attachChild</strong>(Element parent, Element child, Element before) <a class="anchor-link" href="#attachChild"
              title="Permalink to LayoutImpl.attachChild">#</a></h4>
<div class="doc">
<pre class="source">
dart_html.Element attachChild(dart_html.Element parent, dart_html.Element child, dart_html.Element before) {
 dart_html.DivElement container = new dart_html.DivElement();
 container.append(child);

 container.style.position = Position.ABSOLUTE.value;
 container.style.overflow = Overflow.HIDDEN.value;
 // I have added that code here because without it it doesn't show itself and child elements
 container.style.left = "0" + Unit.PX.value;
 container.style.top = "0" + Unit.PX.value;
 container.style.right = "0" + Unit.PX.value;
 container.style.bottom = "0" + Unit.PX.value;
 //
 fillParent(child);

 dart_html.Element beforeContainer = null;
 if (before != null) {
   beforeContainer = before.parent;
   assert (beforeContainer.parent == parent); // : "Element to insert before must be a sibling";
 }
 parent.insertBefore(container, beforeContainer);
 return container;
}
</pre>
</div>
</div>
<div class="method"><h4 id="fillParent">
<button class="show-code">Code</button>
void <strong>fillParent</strong>(Element elem) <a class="anchor-link" href="#fillParent"
              title="Permalink to LayoutImpl.fillParent">#</a></h4>
<div class="doc">
<pre class="source">
void fillParent(dart_html.Element elem) {
 elem.style.position = Position.ABSOLUTE.value;
 elem.style.left = "0" + Unit.PX.value;
 elem.style.top = "0" + Unit.PX.value;
 elem.style.right = "0" + Unit.PX.value;
 elem.style.bottom = "0" + Unit.PX.value;
}
</pre>
</div>
</div>
<div class="method"><h4 id="finalizeLayout">
<button class="show-code">Code</button>
void <strong>finalizeLayout</strong>(Element parent) <a class="anchor-link" href="#finalizeLayout"
              title="Permalink to LayoutImpl.finalizeLayout">#</a></h4>
<div class="doc">
<p>@param parent the parent element</p>
<pre class="source">
void finalizeLayout(dart_html.Element parent) {
}
</pre>
</div>
</div>
<div class="method"><h4 id="getUnitSizeInPixels">
<button class="show-code">Code</button>
double <strong>getUnitSizeInPixels</strong>(Element parent, <a href="../dart_web_toolkit_util/Unit.html">Unit</a> unit, bool vertical) <a class="anchor-link" href="#getUnitSizeInPixels"
              title="Permalink to LayoutImpl.getUnitSizeInPixels">#</a></h4>
<div class="doc">
<pre class="source">
double getUnitSizeInPixels(dart_html.Element parent, Unit unit, bool vertical) {
 if (unit == null) {
   return 1.0;
 }

 switch (unit) {
   case Unit.PCT:
     return (vertical ? parent.client.height : parent.client.width) / 100.0;
   case Unit.EM:
     return relativeRuler.offset.width / 10.0;
   case Unit.EX:
     return relativeRuler.offset.height / 10.0;
   case Unit.CM:
     return fixedRuler.offset.width * 0.1; // 1.0 cm / cm
   case Unit.MM:
     return fixedRuler.offset.width * 0.01; // 0.1 cm / mm
   case Unit.IN:
     return fixedRuler.offset.width * 0.254; // 2.54 cm / in
   case Unit.PT:
     return fixedRuler.offset.width * 0.00353; // 0.0353 cm / pt
   case Unit.PC:
     return fixedRuler.offset.width * 0.0423; // 0.423 cm / pc

   case Unit.PX:
   default:
     return 1.0;
 }
}
</pre>
</div>
</div>
<div class="method"><h4 id="initParent">
<button class="show-code">Code</button>
void <strong>initParent</strong>(Element parent) <a class="anchor-link" href="#initParent"
              title="Permalink to LayoutImpl.initParent">#</a></h4>
<div class="doc">
<pre class="source">
void initParent(dart_html.Element parent) {
 parent.style.position = Position.RELATIVE.value;
 parent.append(relativeRuler = createRuler(Unit.EM, Unit.EX));
}
</pre>
</div>
</div>
<div class="method"><h4 id="layout">
<button class="show-code">Code</button>
void <strong>layout</strong>(<a href="../dart_web_toolkit_layout/Layer.html">Layer</a> layer) <a class="anchor-link" href="#layout"
              title="Permalink to LayoutImpl.layout">#</a></h4>
<div class="doc">
<pre class="source">
void layout(Layer layer) {
 if (layer.visible) {
   layer.container.style.display = "";
 } else {
   layer.container.style.display = Display.NONE.value;
 }

 layer.container.style.left = layer.setLeft ? (layer.left.toString() + layer.leftUnit.value) : "";
 layer.container.style.top = layer.setTop ? (layer.top.toString() + layer.topUnit.value) : "";
 layer.container.style.right = layer.setRight ? (layer.right.toString() + layer.rightUnit.value) : "";
 layer.container.style.bottom = layer.setBottom ? (layer.bottom.toString() + layer.bottomUnit.value) : "";
 layer.container.style.width = layer.setWidth ? (layer.width.toString() + layer.widthUnit.value) : "";
 layer.container.style.height = layer.setHeight ? (layer.height.toString() + layer.heightUnit.value) : "";

 switch (layer.hPos) {
   case Alignment.BEGIN:
     layer.child.style.left = "0" + Unit.PX.value;
     layer.child.style.right = "";
     break;
   case Alignment.END:
     layer.child.style.left = "";
     layer.child.style.right = "0" + Unit.PX.value;
     break;
   case Alignment.STRETCH:
     layer.child.style.left = "0" + Unit.PX.value;
     layer.child.style.right = "0" + Unit.PX.value;
     break;
 }

 switch (layer.vPos) {
   case Alignment.BEGIN:
     layer.child.style.top = "0" + Unit.PX.value;
     layer.child.style.bottom = "";
     break;
   case Alignment.END:
     layer.child.style.top = "";
     layer.child.style.bottom = "0" + Unit.PX.value;
     break;
   case Alignment.STRETCH:
     layer.child.style.top = "0" + Unit.PX.value;
     layer.child.style.bottom = "0" + Unit.PX.value;
     break;
 }
}
</pre>
</div>
</div>
<div class="method"><h4 id="onAttach">
<button class="show-code">Code</button>
void <strong>onAttach</strong>(Element parent) <a class="anchor-link" href="#onAttach"
              title="Permalink to LayoutImpl.onAttach">#</a></h4>
<div class="doc">
<pre class="source">
void onAttach(dart_html.Element parent) {
 // Do nothing. This exists only to help LayoutImplIE6 avoid memory leaks.
}
</pre>
</div>
</div>
<div class="method"><h4 id="onDetach">
<button class="show-code">Code</button>
void <strong>onDetach</strong>(Element parent) <a class="anchor-link" href="#onDetach"
              title="Permalink to LayoutImpl.onDetach">#</a></h4>
<div class="doc">
<pre class="source">
void onDetach(dart_html.Element parent) {
 // Do nothing. This exists only to help LayoutImplIE6 avoid memory leaks.
}
</pre>
</div>
</div>
<div class="method"><h4 id="removeChild">
<button class="show-code">Code</button>
void <strong>removeChild</strong>(Element container, Element child) <a class="anchor-link" href="#removeChild"
              title="Permalink to LayoutImpl.removeChild">#</a></h4>
<div class="doc">
<pre class="source">
void removeChild(dart_html.Element container, dart_html.Element child) {
 container.remove();

 // We want this code to be resilient to the child having already been
 // removed from its container (perhaps by widget code).
 if (child.parent == container) {
   child.remove();
 }

 // Cleanup child styles set by fillParent().
 child.style.position = "";
 child.style.left = "";
 child.style.top = "";
 child.style.width = "";
 child.style.height = "";
}
</pre>
</div>
</div>
</div>
        </div>
        <div class="clear"></div>
        </div>
        <div class="footer">
          <div>This page was generated at 2013-05-30 09:14:44.059</div>
        </div>
        <script async src="../client-live-nav.js"></script>
        </body></html>
        
